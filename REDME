# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ DevOps

## 1. –û–ø–∏—Å–∞–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è:
- –£–¥–æ—Å—Ç–æ–≤–µ—Ä—è—é—â–∏–π —Ü–µ–Ω—Ç—Ä (CA) –¥–ª—è –≤—ã–¥–∞—á–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ (Easy-RSA).
- VPN-—Å–µ—Ä–≤–µ—Ä (OpenVPN) –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤.
- –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (Prometheus, Alertmanager, Node Exporter, OpenVPN Exporter).
- –°–∏—Å—Ç–µ–º–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ GitHub.


## 2. –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –∏ –∏—Ö –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 2.1. –£–¥–æ—Å—Ç–æ–≤–µ—Ä—è—é—â–∏–π —Ü–µ–Ω—Ç—Ä (CA) —Å Easy-RSA
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ—Ä–Ω–µ–≤–æ–≥–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –∏ –ø–æ–¥–ø–∏—Å–∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤.
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ DEB-–ø–∞–∫–µ—Ç `easy-rsa.deb`.
- –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
  ```bash
  ./easyrsa init-pki
  ./easyrsa build-ca
  ```

### 2.2. OpenVPN
- –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∑–∞—â–∏—â—ë–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –≤ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—É—é —Å–µ—Ç—å.
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ DEB-–ø–∞–∫–µ—Ç `openvpn-server.deb`.
- –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –ø–æ–¥–ø–∏—Å—ã–≤–∞—é—Ç—Å—è —É–¥–æ—Å—Ç–æ–≤–µ—Ä—è—é—â–∏–º —Ü–µ–Ω—Ç—Ä–æ–º.
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `/etc/openvpn/server.conf`.

### 2.3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Prometheus + Alertmanager + Exporters)
- Prometheus —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ —Å —Å–µ—Ä–≤–µ—Ä–æ–≤.
- Alertmanager —É–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ –æ —Å–±–æ—è—Ö.
- Node Exporter —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ —Å–∏—Å—Ç–µ–º—ã.
- OpenVPN Exporter —Å–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è—Ö.
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ DEB-–ø–∞–∫–µ—Ç—ã:
  - `prometheus.deb`
  - `alertmanager.deb`
  - `node-exporter.deb`
  - `openvpn-exporter.deb`
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
  - `/etc/prometheus/prometheus.yml`
  - `/etc/alertmanager/alertmanager.yml`
  - `/etc/systemd/system/node_exporter.service`
  - `/etc/systemd/system/openvpn_exporter.service`

## 3. –û–ø–∏—Å–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤
| –ù–∞–∑–≤–∞–Ω–∏–µ               | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------------------|----------|
| `backup_to_github.sh`  | –°–∫—Ä–∏–ø—Ç —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –Ω–∞ GitHub. |
| `install_alertmanager.sh` | –°–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Alertmanager. |
| `install_node_exporter.sh` | –°–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Node Exporter. |
| `install_openvpn_exporter.sh` | –°–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ OpenVPN Exporter. |
| `install_prometheus.sh` | –°–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Prometheus. |
| `alert_rules.sh` | –°–ø–∏—Å–æ–∫ –ø—Ä–∞–≤–∏–ª –¥–ª—è Alertmanager. |
| `iptables.sh` | –°–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä–∞ –¥–ª—è –∑–∞—â–∏—Ç—ã —Å–∏—Å—Ç–µ–º—ã. |

## 4. –°–∏—Å—Ç–µ–º–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

–ö–∞–∂–¥–æ–µ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ –≤ 3:00 –Ω–æ—á–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ —Å–∏—Å—Ç–µ–º–µ.

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∫—Ä–∏–ø—Ç backup_to_github.sh, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è:

–ê—Ä—Ö–∏–≤–∏—Ä—É–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã OpenVPN, Prometheus, Alertmanager –∏ —É–¥–æ—Å—Ç–æ–≤–µ—Ä—è—é—â–µ–≥–æ —Ü–µ–Ω—Ç—Ä–∞ –∞ —Ç–∞–∫–∂–µ –≤—Å–µ–≥–æ –æ—Å—Ç–∞–ª—å–Ω–æ–≥–æ.

–°–æ–∑–¥–∞—ë—Ç –∫–æ–º–º–∏—Ç —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Ç–µ–∫—É—â–µ–π –¥–∞—Ç—ã.

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∞—Ä—Ö–∏–≤ –≤ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub.

–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±—ç–∫–∞–ø:

–í —Å–ª—É—á–∞–µ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ —Å–±–æ—è —Å–µ—Ä–≤–µ—Ä–∞ –º–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã —Å GitHub.

–î–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã:

git clone https://github.com/your_private_repo.git backup_repo
cd backup_repo
tar -xzf backup.tar.gz -C /

–ü–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã:

systemctl restart openvpn prometheus alertmanager

–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ:

–ü—Ä–∏ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–∏ –∏–ª–∏ —Å–ª—É—á–∞–π–Ω–æ–º —É–¥–∞–ª–µ–Ω–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤.

–ü–æ—Å–ª–µ –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–≥–æ —Å–±–æ—è –∏–ª–∏ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞.

–ü—Ä–∏ –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ (–Ω—É–∂–Ω–æ –ø–µ—Ä–µ–≤—ã–ø—É—Å—Ç–∏—Ç—å –∫–ª—é—á–∏ —á–µ—Ä–µ–∑ CA –∏ –∑–∞–Ω–æ–≤–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤ —Å–∏—Å—Ç–µ–º—É).

## 5. –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥—É
- Prometheus —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ —Å `localhost:9090`.
- –î–æ—Å—Ç—É–ø –∫ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É Alertmanager: `http://<server_ip>:9093`.
- –ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∞–ª–µ—Ä—Ç—ã:
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ OpenVPN.
  - –ö–æ–Ω—Ç—Ä–æ–ª—å –∑–∞–≥—Ä—É–∑–∫–∏ CPU –∏ RAM.
  - –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –Ω–µ—Å–∞–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π.
- –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–∞ email.

## 6. –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- **–†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã:**
  ```bash
  sudo dpkg -i easy-rsa.deb openvpn-server.deb prometheus.deb alertmanager.deb node-exporter.deb openvpn-exporter.deb
  ```
- **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ –≤ VPN:**
  ```bash
  ./easyrsa gen-req client01
  ./easyrsa sign-req client client01
  ```
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:**
  ```bash
  systemctl status prometheus alertmanager node_exporter openvpn_exporter


  ## 7          –°—Ö–µ–º–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã (–≤—Å—ë –Ω–∞ –æ–¥–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ)
             +----------------------+
            |  –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å         |
            |  (–ü–ö, –Ω–æ—É—Ç–±—É–∫)        |
            +----------+-----------+
                       |
                       v
            +----------------------+
            |  –°–µ—Ä–≤–µ—Ä (VPN + CA + Monitoring)  |
            |  - OpenVPN                       |
            |  - Easy-RSA (CA)                 |
            |  - Prometheus                    |
            |  - Alertmanager                  |
            |  - Node Exporter                 |
            |  - OpenVPN Exporter              |
            +----------------------+
                       |
      --------------------------------------
      |                                    |
      v                                    v
+----------------------+         +----------------------+
|  GitHub Backup      |         |  Email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è  |
|  (–†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏)  |         |  (–ê–ª–µ—Ä—Ç—ã –æ—Ç Alertmanager) |
+----------------------+         +----------------------+


üìå –û–±—ä—è—Å–Ω–µ–Ω–∏–µ:
	‚Ä¢	–û–¥–∏–Ω —Å–µ—Ä–≤–µ—Ä –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å—Ä–∞–∑—É —Ç—Ä–∏ —Ä–æ–ª–∏: VPN-—Å–µ—Ä–≤–µ—Ä, —É–¥–æ—Å—Ç–æ–≤–µ—Ä—è—é—â–∏–π —Ü–µ–Ω—Ç—Ä (CA) –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥.
	‚Ä¢	–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ OpenVPN, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –µ–≥–æ —á–µ—Ä–µ–∑ Easy-RSA (CA).
	‚Ä¢	Prometheus —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –æ—Ç Node Exporter –∏ OpenVPN Exporter.
	‚Ä¢	Alertmanager –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ email.
	‚Ä¢	GitHub Backup —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–æ–ø–∏–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π. 
 
       

      –°—Ö–µ–º–∞ –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö (–≤—Å—ë –Ω–∞ –æ–¥–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ)

                +----------------------+
                |   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å        |
                |   (–ü–ö, –Ω–æ—É—Ç–±—É–∫)       |
                +----------+-----------+
                           |
                           v
     ------------------------------------------
     |                                         |
     v                                         v
+----------------------------------+
|  –°–µ—Ä–≤–µ—Ä (VPN + CA + Monitoring) |
|  - OpenVPN (–ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è) |
|  - Easy-RSA (–ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤) |
|  - Prometheus (—Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫) |
|  - Alertmanager (–∞–Ω–∞–ª–∏–∑ –∏ –∞–ª–µ—Ä—Ç—ã) |
+----------------------------------+
     |                                         |
     v                                         v
+----------------------+         +----------------------+
|  GitHub Backup      |         |  Email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è  |
|  (–†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏)  |         |  (–ê–ª–µ—Ä—Ç—ã –æ—Ç Alertmanager) |
+----------------------+         +----------------------+

üìå –û–±—ä—è—Å–Ω–µ–Ω–∏–µ:
	1.	–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è ‚Üí OpenVPN –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —á–µ—Ä–µ–∑ Easy-RSA (CA).
	2.	Prometheus —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ ‚Üí –æ—Ç —Å–∞–º–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ (Node Exporter) –∏ OpenVPN (OpenVPN Exporter).
	3.	Alertmanager –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ email.
	4.	GitHub Backup –∫–æ–ø–∏—Ä—É–µ—Ç –≤–∞–∂–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.
